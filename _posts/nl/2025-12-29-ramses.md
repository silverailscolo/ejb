---
layout: post
lang: nl
page-id: ramses
title: Ken je Ramses?
date: "2025-12-29"
categories:
  - computers
  - smart-home
---

Ik had al HomeAssistant. Met _Integraties_ kan je daar diverse 'slimme' apparaten aan koppelen. Welke 'slimme' apparaten heb jij in je huis?

Fabrikanten bieden soms een 'gratis' app om hun apparaat mee te bedienen. Dit werkt vaak via een cloud (server via internet): een privacy- en beveiligingsrisico, en afhankelijk van wat de fabrikant aan gegevens in de app laat zien.
Voorbeelden:
- Ikea Tradfri: **Ikea Smart** app + Tradfri hub
- Tuya Smart: **Tuya** app + Tuya bridge
- Nibe warmtepomp: **MyUplink** app + UTP
- Luxaflex shutters: **PowerView** app + bridge
- Casambi lampen (bluetooth): **Air** app + iPhone als BLE bridge
- Honeywell thermostaat, Itho ventilatie: **evohome** + RF bridge

Soms deelt een fabrikant de gegevens die de app gebruikt als een [API](https://nl.wikipedia.org/wiki/Application_programming_interface) (Application Programming Interface) waarop HA kan aanhaken. Zo niet, dan moet je uit de zichtbare gegevens zelf ontdekken wat ze betekenen en hoe je ze kan nabootsen. Maar als ze daarbij geavanceerde _encryptie_ toepassen is het onmogelijk om uit de zichtbare data af te leiden hoe een bepaald protocol is opgebouwd.

Als _open source_ software schrijven mensen zelf een Integratie voor [HomeAssistant](https://www.home-assistant.io/) (HA). Ik heb een paar Custom Integrations in HA geïnstalleerd, zoals PowerView en Ikea Tradfri. Met het oog op veiligheid/privacy heeft het zeker de voorkeur om HA direct aan een apparaat te koppelen en niet via de API. 

Voor onze [Nibe F1255](https://www.nibe.eu/nl-nl/producten/warmtepompen/water-water-warmtepompen/f1255-pc) warmtepomp bestaat er een Zweeds programma dat i.p.v. via de API aan de ModBus aansluiting wordt gekoppeld, en via wifi op een [PiZero](https://www.raspberrypi.com/products/raspberry-pi-zero-2-w/) microcontroller naar MQTT berichten stuurt en ontvangt.

Bij onze WTW-ventilatoren in de bad-, slaap- en woonkamer hoort een (dure €100) draadloze RF-schakelaar. Maar zou het niet handig zijn om ze op bepaalde momenten in te schakelen, bijv. als je het licht in het toilet aandoet, of 's ochtends na het opstaan even een uurtje op stand hoog?
De fabrikanten gaven mij geen technische informatie over hoe de schakelaars met de ventilatoren "praten". Integendeel, ze hebben liever niet dat je aan hun standaard instellingen zit uit angst dat er klachten ontstaan. En ze willen geld verdienen aan hun "kennis" door die af te schermen en deze info alleen aan professionele monteurs te geven. En die delen die info ook niet graag (als ze dat al mogen).

Ik heb mijn [ClimaRad](https://www.climarad.nl/) WTW - waar geen afstandsbediening bij werd geleverd - zelf opengemaakt en trof daar een printplaat met een antenne aan. Via de stickers leerde ik dat het een RF-antenne was en dat de print door [Airios](https://www.airios.eu/) in Nederland is ontwikkeld.

Een telefoontje naar Airios hielp niets: "neem contact op met ClimaRad".
[Airios](https://www.airios.eu/) blijkt oorspronkelijk de consumententak te zijn van Honeywell/[Resideo](https://www.resideo.com/nl/nl/). En met die info kwam ik uit bij de open source HA-integratie [Ramses RF](https://github.com/ramses-rf), geschreven in python door David Bonnes.

- HA User Forum: [Ramses RF draadje](https://community.home-assistant.io/t/honeywell-ch-dhw-via-rf-evohome-sundial-hometronics-chronotherm/)
- Repo lib: https://github.com/ramses-rf/ramses_rf
- Repo integratie: https://github.com/ramses-rf/ramses_cc
- Wiki: https://github.com/ramses-rf/ramses_cc/wiki
- Pypi: https://pypi.org/project/ramses-rf/

David Bonnes zocht vanaf 2021 samen met Peter Price uit hoe de berichtjes werkten die ze met een 868MHz antenne opvingen (Ramses-II protocol). Zij ontwikkelden de eerste hardware en software voor besturing van verwarming en warm tapwater (evohome; HEAT). Nederlandse gebruikers vulden de code aan om ook ventilatie te besturen ([Itho](https://www.ithodaalderop.nl/), [Orcon](https://orcon.nl/), [Nuaire](https://www.nuaire.co.uk/); HVAC).

Maar onze ventilators en warmteterugwin-units (NL: WTW, EN: HRU voor heat recovery unit) van Vasco en ClimaRad werkten nog niet met Ramses RF, dus daar ben ik toen extra code voor gaan schrijven. Toen die code hier in huis goed werkte, vroeg ik aan David of hij de code op wilde nemen in een nieuwe versie die alle gebruikers kunnen installeren. Maar hij was bezorgd dat mijn aanpassingen bij andere gebruikers problemen konden geven. Hij gaf ook aan dat hij door zijn werk te weinig tijd had om Ramses RF up-to-date te houden en schreef in de code dat hij alles aan een nieuwe beheerder wilde overdragen. Na 4 maanden heb ik medio 2025 die taak van David overgenomen. Door aangekondigde aanpassingen in HomeAssistant zou eind 2025 de Ramses RF-integratie niet meer werken, dus dat werden mijn nieuwe prioriteiten:
- [x] Blocking file IO tijdens opstart
- [x] Verouderde (non) entity schema's

Helaas ontdekte ik ook, dat ik mijn ClimaRad Ventura WTW niet met Ramses RF kon besturen (wel uitlezen, maar je kan er geen remote aan koppelen). Daarvoor had iemand in Spanje begin 2025 toevallig ook iets bedacht: de PyAirios library en airios HA-integrate, die ontdekte door op "airios + ramses" te zoeken.
Kijk verder:
- mijn eigen [homeassistant-airios-component fork](https://github.com/silverailscolo/homeassistant-airios-component)
- mijn eigen [pyairios fork](https://github.com/silverailscolo/pyairios)
- Samuel Cabrero's [pyairios](https://github.com/scabrero/pyairios)): Python library to interface with Airios RF bridges
