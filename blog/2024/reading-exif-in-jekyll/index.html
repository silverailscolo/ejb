<!DOCTYPE html> <html lang="nl"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, notranslate, noimageindex"> <title> Reading EXIF tags in Jekyll with exiftools | EJB's site </title> <meta name="author" content="EJ Broerse"> <meta name="description" content="Informatieve site over mijn werk en hobby's. Geen garanties!"> <meta name="keywords" content="architecture, house, trains"> <link rel="stylesheet" href="/ejb/assets/css/bootstrap.min.css?59683d8d628e6717785b508ec539c429"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link rel="shortcut icon" href="/ejb/assets/img/favicon.png?7de88881c5eea3dd7fcff1b84ec5f1bf"> <link rel="stylesheet" href="/ejb/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://silverailscolo.github.io/ejb/blog/2024/reading-exif-in-jekyll/"> <link defer rel="stylesheet" href="/ejb/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/ejb/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/ejb/"> <div><img src="/ejb/assets/img/favicon.png" alt="Broerse"></div> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/ejb/">over </a> </li> <li class="nav-item "> <a class="nav-link" href="/ejb/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/ejb/architect/">architectuur </a> </li> <li class="nav-item "> <a class="nav-link" href="/ejb/projects/">projecten </a> </li> <li class="nav-item "> <a class="nav-link" href="/ejb/gallery/">collecties </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">treinen </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ejb/trains/layout">mijn modelbaan</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/rollingstock">het materieel</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/trains/dcc">DCC</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/trains/prototype">prototype</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/trains/tips">tips</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">huis </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ejb/house/garden">tuin</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/house/renovation">renovatie</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/house/history">geschiedenis</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/house/smart">smart home</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/house/ms15">eerste huis</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">computers </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ejb/computers/repositories">GitHub repositories</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/computers/mymacs">mijn Macs</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/computers/macintosh">Mac tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/computers/lubuntu">Lubuntu tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ejb/computers/playground">speeltuin</a> </div> </li> <li class="nav-item active"> <a class="nav-link" href="/ejb/en-us/blog/2024/reading-exif-in-jekyll/"> EN-US</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="message-box" id="no-translation-msg">Sorry, deze pagina is niet beschikbaar in het Nederlands.</div> <div class="post"> <header class="post-header"> <h1 class="post-title">Reading EXIF tags in Jekyll with exiftools</h1> <p class="post-meta"> 19 april 2024 </p> <p class="post-tags"> <a href="/ejb/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/ejb/blog/tag/computers"> <i class="fa-solid fa-hashtag fa-sm"></i> computers</a>     ·   <a href="/ejb/blog/category/software"> <i class="fa-solid fa-tag fa-sm"></i> software</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>As I am migrating this site to Jekyll / GitHub pages, I am integrating data that was separate (and under the hood) up to now. That requires a bit of scripting, with minimal re-entry of stuff.</p> <p>An important example are my pictures, that I once managed in <a href="https://www.extensis.com/portfolio" rel="external nofollow noopener" target="_blank">Extensis Portfolio</a>, and later as separate files on a local HD.</p> <p>It would be nice to provide a caption with each photo I add to the site, and as I remembered that I once put keywords and captions for many images into the image files as EXIF tags, I now try to read those fields from the images and apply them as captions in the lightGallery slide shows, like <a href="/ejb/assets/art_gallery/sketches/">here</a>.</p> <p>A lot of (old) tools are available to extract the EXIF tags, but Portfolio used other fields… After EXIF came IPTC tags, used for GPS lat/long data, title etc. IPTC is sparsely supported bij ruby tools. And as it happens, my image captions are in so called XMP tags, for which just a few tools provide support.</p> <p>To make things more complicated, modern image management tools like Adobe <a href="https://www.adobe.com/nl/products/photoshop-lightroom.html" rel="external nofollow noopener" target="_blank">Lightroom</a> and <a href="https://www.digikam.org/" rel="external nofollow noopener" target="_blank">DigiKam</a> allow you to enter labels in XMP and copy those strings to EXIF respectively. (although XMP allows for longer strings, and EXIF only allows for printable ASCII character, so where do the ü and Ø go in the process?)</p> <p>Today I discovered a tool called <a href="https://exiftool.org/" rel="external nofollow noopener" target="_blank">exiftool</a>, that finally will give me access to my cherished image captions. From inside Jekyll you can use it through the <a href="https://rubygems.org/gems/exiftool/versions/1.2.5" rel="external nofollow noopener" target="_blank">exiftool gem</a>. After a bit of fiddling, I am now able to display all text fields stored in a picture file, and automatically copy it to the html code for one of my web galleries. Exiftool Docs warn that the three tag types overlap, unless you ask for <code class="language-plaintext highlighter-rouge">-all</code> tags. If we focus on the caption and the copyright fields, these are the specific tag names to fetch:</p> <table> <thead> <tr> <th>Type</th> <th>Caption field name</th> <th>Copyright field name</th> <th>Used</th> </tr> </thead> <tbody> <tr> <td>EXIF</td> <td>user_comment</td> <td>copyright</td> <td> </td> </tr> <tr> <td>IPTC</td> <td>“caption-abstract”</td> <td>copyright_notice</td> <td>&lt;–</td> </tr> <tr> <td>XMP</td> <td>description</td> <td>rights</td> <td> </td> </tr> </tbody> </table> <p>In Ruby code that makes for:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require 'exiftool'
...
exiftoolbatch = Exiftool.new(Dir["#{Dir.pwd + '/' + dir}/*.*"]) # we are in original_dir
...
exif =  exiftoolbatch.result_for(fullpath)
...
capt = exif[:"caption-abstract"]
copy = exif[:copyright]
</code></pre></div></div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Verder lezen?</h2> <p class="mb-2">Deze stukjes zijn misschien ook interessant:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ejb/blog/2018/translation-dilemmas/">Translation Dilemmas</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ejb/blog/2015/git-it/">Git it?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ejb/blog/2024/goodbye-hypersite/">Vaarwel Hypersite</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ejb/blog/2024/whisper-smart-fan/">Bouw een slimme ventilator-besturing</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ejb/blog/2024/smartovendisplay/">Bouw zelf een AGA Display</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 EJ Broerse. <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.nl" rel="external nofollow noopener" target="_blank"><img decoding="async" loading="lazy" src="/ejb/assets/img/by-nc-sa.png" width="117" height="41" alt="CC BY-NC-SA 4.0" style="float: right;"></a> <br> Laatst bijgewerkt: 19 apr 2024 </div> </footer> <script src="/ejb/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/ejb/assets/js/masonry.js" type="text/javascript"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>