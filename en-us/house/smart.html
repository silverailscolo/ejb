<!DOCTYPE html> <html lang="en-us"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, notranslate, noimageindex"> <title> Smart Home | EJB's site </title> <meta name="author" content="EJ Broerse"> <meta name="description" content="Entertaining info on me and my occupations."> <meta name="keywords" content="architecture, house, trains"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?59683d8d628e6717785b508ec539c429"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?771920573e5f7efee19e36fbd8b06c1f" rel="stylesheet"> <link rel="shortcut icon" href="/en-us/assets/img/favicon.png?7de88881c5eea3dd7fcff1b84ec5f1bf"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://silverailscolo.github.io/en-us/house/smart"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?c04bcc15fe9caf8f70d95130e742bb31"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/en-us/"> <div><img src="/assets/img/favicon.png" alt="Broerse"></div> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/en-us/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/en-us/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/en-us/architect/">architecture </a> </li> <li class="nav-item "> <a class="nav-link" href="/en-us/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/en-us/gallery/">collections </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">trains </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/en-us/trains/layout">my layout</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/rollingstock">my roster</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/trains/dcc">DCC</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/trains/prototype">prototype</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/trains/tips">tips</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">house </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/en-us/house/garden">garden</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/house/renovation">renovation</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/house/history">history</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/house/smart">smart home</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/house/ms15">first house</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">computers </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/en-us/computers/repositories">GitHub repositories</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/computers/mymacs">my Macs</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/computers/macintosh">Mac tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/computers/lubuntu">Lubuntu tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/en-us/computers/playground">playground</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search..." onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="nav-item active" title="Change display language"> <a class="nav-link" href="/house/smart"> NL</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Smart Home</h1> <p class="post-description"></p> </header> <article> <p>We started simple to automate the house: a couple of Ikea lights, two motorized shutters Several years on, it was time to connect these different systems and add more smartness.</p> <p><img src="/assets/img/house/smart/home-assistant-logo.svg" alt="Home Assistant logo"></p> <p>I set up a Raspberry Pi 4 running <a href="https://www.home-assistant.io/" rel="external nofollow noopener" target="_blank">hassos</a> OS to manage the connected systems in our current home. It consumes just 4W, so that saves a lot compared to running it on a desktop (iMac 24/7 with Oracle VirtualBox consumed 36 W = 312 kW/year).</p> <p><a href="https://www.home-assistant.io/" rel="external nofollow noopener" target="_blank">HomeAssistant</a> (HA) allows manual and automated operation of different smart lights, blinds etc. all in one place with all smartness running locally without relying on cloud services.</p> <p>Standard supported integrations I use:</p> <ul> <li> <a href="https://www.home-assistant.io/integrations/tradfri/" rel="external nofollow noopener" target="_blank">Ikea Tradfri</a> lighting, smart sockets and blinds</li> <li> <a href="https://www.home-assistant.io/integrations/tuya/" rel="external nofollow noopener" target="_blank">Tuya Smart</a> Zigbee (also for OEM like Lidl)</li> <li> <a href="https://www.home-assistant.io/integrations/hunterdouglas_powerview/" rel="external nofollow noopener" target="_blank">PowerView</a> Hunter Douglas/Luxaflex curtains &amp; blinds</li> <li>SolarEdge PV panel convertor</li> <li> <a href="https://www.home-assistant.io/integrations/tado/" rel="external nofollow noopener" target="_blank">Tado</a> smart thermostats</li> <li>Siemens/Bosch Home Connect (washing machine alerts)</li> <li>MyUplink, the current protocol for our Nibe F1255 heat pump</li> </ul> <p>HA Community Plug-ins allow additional systems to tie in via HACS (Home Assistant Community Store) and even by adding custom repositories from GitHub in HACS, e.g.</p> <ul> <li>myenergi (Zappi EV charger and energy monitor)</li> <li>Gardena garden sprinkler timers</li> <li>Casambi Bluetooth (not using the Casambi API/server/gateway)</li> </ul> <p>HomeAssistant supports so called Add-Ons that provide extra functions on the Pi4 server. I use:</p> <ul> <li>File Editor (to edit config files in the iOS app, or remotely via)</li> <li>Advanced SSH &amp; Web Terminal</li> <li>Mosquito Broker (for MQTT messaging on the local Wi-Fi network)</li> <li>Samba NAS (to access a shared folder on the RPi)</li> <li>InfluxDB (to collect long term energy statistics)</li> </ul> <p>MQTT is used to connect independent devices to HomeAssistant, for instance:</p> <ul> <li> <a href="https://github.com/anerdins/nibepi" rel="external nofollow noopener" target="_blank">nibepi</a> (to control our Nibe F1255 heat pump over Modbus, running on a separate Raspberry PiZero)</li> </ul> <h2 id="energy-monitoring">Energy Monitoring</h2> <p>By combining the utility meter readings with the SolarEdge PV generation and <a href="https://www.myenergi.com" rel="external nofollow noopener" target="_blank">myenergi</a> Zappi EV charger figures, I am able to separate the EV charging from the electricity consumed in the house. And by adding two extra CT clamps in the main switch board I got a grip on our bigger electric appliances, such as the electric stove.</p> <p><img src="/assets/img/house/smart/ha_energydistr.png" alt="Home Assistant logo"></p> <h2 id="custom-tools">Custom tools</h2> <p>I coded some extra hardware to customise exactly what I was looking for. Using MicroPython and ESPHome this is in fact not too difficult. I encourage you to try this out instead of making do with all the closed-source hardware.</p> <div class="card mx-auto mb-3 p-3" style="max-width: 95%;"> <h3 id="oven">Smart Oven Display</h3> <p>I happened to forget shutting down the stove a couple of times, as there is no indicator light or buzzer on the AGA Cooker. That meant 1-2 kWh lost in space! To fix this, I connected a Raspberry Pico microcontroller with a 1.3" OLED screen to HomeAssistant via MQTT/Wi-Fi. As soon as the sensor in the main switch board signals that the stove is on, it sends an MQTT message which wakes up my ovenside display, showing which hub or oven is on. A timer starts preheating timing of either a cooking hub (15 mins) or one of the ovens (60 mins). After the set period we receive an alert on our phone telling us "Oven is Ready". And after 2 hours, I am reminded if I still mean to have the stove on. Energy spill contained!</p> <figure><img src="/assets/img/house/smart/aga/agadisplay_IMG9388.jpg" alt="AGA display in use" class="img-fluid"><figcaption class="kleiner">The finished display</figcaption></figure> <p>See <a href="/en-us/blog/2024/smartovendisplay">this blog post</a> for details.</p> </div> <div class="card mx-auto mb-3 p-3" style="max-width: 95%;"> <h3 id="fan">Smart Fan</h3> <p>In an energy efficient house air exchange must be managed, and excessive ventilation would lead to either too hot or too cold rooms. Relying only on natural ventilation proved not to fuction, either for lack of pressure/wind or excessive noise from traffic waking us up at night.<br> Using the CO<sub>2</sub> sensor already in place to drive the fan speed, I programmed a small ESP32 Atom Lite controller to extract just the required amount of air from our bedroom, using a variable speed fan mounted outside the room.</p> <figure><img src="/assets/img/house/smart/whisper/whisper_complete.jpg" alt="Fan in use" class="img-fluid"><figcaption class="kleiner">Smart fan install</figcaption></figure> <p>See <a href="/en-us/blog/2024/whisper-fan">this blog post</a> for details.</p> </div> <p>When you shop for a new gadget, take note of the supported protocol, for example HomeKit, Zigbee/Tuya, Matter or Thread. I would not recommend OEM or private protocols als you might end up with a dedicated bridge for each. And they are always on, consuming a couple of Watts.</p> </article> </div> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 EJ Broerse. <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en-us" rel="external nofollow noopener" target="_blank"><img decoding="async" loading="lazy" src="/assets/img/by-nc-sa.png" width="117" height="41" alt="CC BY-NC-SA 4.0" style="float: right;"></a> <br> Last updated: Jan 8, 2025 </div> </footer> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script src="/assets/js/tooltips-setup.js?53023e960fbc64cccb90d32e9363de2b"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?9bdd33e866d401a2c33d948c2984c629"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?a84aa51a27b573448ca0e72a181f4bee"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>